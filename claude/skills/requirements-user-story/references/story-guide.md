# ユーザーストーリー作成ガイド

## 目次

- [ストーリーフォーマット](#ストーリーフォーマット)
- [INVEST原則](#invest原則)
- [受け入れ基準](#受け入れ基準)
- [優先順位付け手法](#優先順位付け手法)
- [アンチパターン](#アンチパターン)

## ストーリーフォーマット

### 基本形式

```
As a [ユーザータイプ]
I want to [やりたいこと]
So that [得られる価値/理由]
```

### 日本語形式

```
[ユーザータイプ]として
[やりたいこと]したい
なぜなら[得られる価値/理由]だから
```

### 良い例

```
As a 開発者
I want to スロークエリを入力する
So that AIが改善案を提案してくれる

As a チームリーダー
I want to チームメンバーの改善履歴を見る
So that ナレッジを共有できる
```

### 悪い例

```
❌ As a ユーザー
   I want to システムが高速に動作する
   So that 快適に使える
   → 曖昧、テストできない

❌ As a 開発者
   I want to Reactを使う
   So that モダンな開発ができる
   → 技術選択であり、ユーザー価値ではない
```

## INVEST原則

良いストーリーの6つの条件。

### Independent（独立している）

他のストーリーに依存せず、単独で実装・リリースできる。

```
❌ 依存あり
US-001: ユーザー登録できる
US-002: ログインできる（US-001に依存）
US-003: プロフィールを編集できる（US-002に依存）

✅ 独立
US-001: ユーザー登録できる
US-002: メールでログインできる
US-003: Googleでログインできる
```

### Negotiable（交渉可能）

詳細は実装時に交渉・調整できる余地がある。

```
❌ 詳細すぎ
「青色の送信ボタン（#0066CC）を右下に配置」

✅ 交渉可能
「SQLを送信できる」
```

### Valuable（価値がある）

ユーザーにとって価値がある。技術タスクではない。

```
❌ 技術タスク
「データベースのインデックスを追加する」
「APIのレスポンスをキャッシュする」

✅ ユーザー価値
「検索結果が1秒以内に表示される」
```

### Estimable（見積もり可能）

チームが見積もれる程度に理解できている。

```
❌ 見積もり不可
「AIを改善する」

✅ 見積もり可能
「改善案の精度を80%以上にする」
```

### Small（小さい）

1スプリント（1-2週間）以内に完了できるサイズ。

```
❌ 大きすぎ
「ユーザー管理機能を実装する」

✅ 適切なサイズ
「ユーザーを一覧表示できる」
「ユーザーを検索できる」
「ユーザーを削除できる」
```

### Testable（テスト可能）

完了を客観的に判断できる。

```
❌ テスト不可
「使いやすいUIにする」

✅ テスト可能
「3クリック以内でSQL入力画面に到達できる」
```

## 受け入れ基準

### Given-When-Then形式

```
Given [前提条件/初期状態]
When [アクション/操作]
Then [期待結果]
```

### 例

```
ストーリー: SQLを入力できる

受け入れ基準:

1. 正常系
   Given ログイン済みユーザーがダッシュボードにいる
   When SQL入力欄にSELECTクエリを入力して送信ボタンを押す
   Then 5秒以内に改善案が3つ以上表示される

2. バリデーション
   Given SQL入力欄が空の状態で
   When 送信ボタンを押す
   Then 「SQLを入力してください」とエラーが表示される

3. エラーハンドリング
   Given 構文エラーのあるSQLを入力して
   When 送信ボタンを押す
   Then 構文エラーの箇所がハイライトされる
```

### チェックリスト形式（簡易版）

```
受け入れ基準:
- [ ] SQLを入力できる
- [ ] スキーマも入力できる
- [ ] 送信後5秒以内に結果が表示される
- [ ] 空入力時にエラーが表示される
```

## 優先順位付け手法

### MoSCoW法

| カテゴリ   | 意味           | 目安                                   |
| ---------- | -------------- | -------------------------------------- |
| **M**ust   | 必須           | リリースに必要。これがないと価値がない |
| **S**hould | 重要           | なくてもリリースできるが、ないと不便   |
| **C**ould  | あると良い     | 時間があれば実装                       |
| **W**on't  | 今回はやらない | 明示的にスコープ外                     |

**配分目安**: Must 60% / Should 20% / Could 20%

### ICEスコアリング

```
ICEスコア = Impact × Confidence × Ease
```

| 要素       | 説明               | スコア例                   |
| ---------- | ------------------ | -------------------------- |
| Impact     | ユーザーへの影響度 | 10: 全ユーザーに大きな価値 |
| Confidence | 成功の確信度       | 10: 確実にできる           |
| Ease       | 実装の容易さ       | 10: 1日で完了              |

**例**:
| ストーリー   | I  | C | E | ICE |
| ------------ | -- | - | - | --- |
| SQL入力      | 10 | 9 | 7 | 630 |
| エクスポート | 5  | 8 | 9 | 360 |

### RICE法（代替）

```
RICEスコア = (Reach × Impact × Confidence) / Effort
```

- Reach: 影響を受けるユーザー数
- Impact: ユーザーへの影響度（0.25/0.5/1/2/3）
- Confidence: 確信度（%）
- Effort: 工数（人月）

## アンチパターン

### 1. 技術ストーリー

```
❌ 「開発者としてReactを使いたい」
❌ 「DBのパフォーマンスを改善したい」

→ これらは技術タスクであり、ストーリーではない
→ ユーザー価値に言い換える：「検索が1秒以内に完了する」
```

### 2. UIストーリー

```
❌ 「ボタンを追加する」
❌ 「画面をリニューアルする」

→ UI変更の目的（ユーザー価値）を明確に
→ 「3クリック以内で目的を達成できる」
```

### 3. 巨大ストーリー

```
❌ 「ユーザー管理機能」
❌ 「レポート機能」

→ エピックとして扱い、小さなストーリーに分解
```

### 4. 曖昧なストーリー

```
❌ 「使いやすくする」
❌ 「パフォーマンスを改善する」

→ 具体的な数値や条件を入れる
→ 「ページ読み込みが2秒以内」
```

### 5. So thatの欠落

```
❌ As a ユーザー, I want to ログインする
   → なぜログインしたいのか不明

✅ As a ユーザー, I want to ログインする
   So that 自分のデータにアクセスできる
```
