# DESIGN.md テンプレート

設計ドキュメントを生成する際、以下のテンプレートを使用する。

```markdown
# [プロジェクト名] 設計ドキュメント

生成日: [日付]
ジェネレーター: analyzing-requirements

## システム概要
[システムの目的、解決する問題、ビジネス価値、対象ユーザー]

## 機能要件
### 必須機能（MUST have）
- [機能1の説明]
- [機能2の説明]

### オプション機能（NICE to have）
- [機能3の説明]

## 非機能要件
### パフォーマンス要件
- レスポンスタイム: [具体的な数値]
- スループット: [具体的な数値]
- 同時接続数: [具体的な数値]

### セキュリティ要件
- 認証方式: [JWT、Session、OAuth等]
- 認可方式: [RBAC、ABAC等]
- データ暗号化: [保存時、転送時]
- 脆弱性対策: [XSS、CSRF、SQLインジェクション等]

### 可用性・信頼性
- 稼働率目標: [99.9%等]
- バックアップ戦略: [方式と頻度]
- 障害復旧時間: [RTO、RPO]

## アーキテクチャ設計
### システム構成
[コンポーネント図、レイヤーアーキテクチャの説明]

### 技術スタック
- **フロントエンド**: [React、Vue.js等]
- **バックエンド**: [Node.js、Go、Python等]
- **データベース**: [PostgreSQL、MongoDB等]
- **インフラ**: [AWS、GCP、Azure等]
- **その他**: [Redis、RabbitMQ等]

### モジュール構成
[各モジュールの責務と依存関係]

## データ設計
### エンティティ定義
```
User
- id: UUID (PK)
- email: String (unique)
- name: String
- created_at: Timestamp

[他のエンティティ...]
```

### データフロー
[データの流れを図で示す、または文章で説明]

## API設計
### エンドポイント一覧
```
POST   /api/auth/login      - ログイン
GET    /api/users/:id       - ユーザー情報取得
PUT    /api/users/:id       - ユーザー情報更新
[他のエンドポイント...]
```

### リクエスト/レスポンス例
```json
// POST /api/auth/login
Request:
{
  "email": "user@example.com",
  "password": "secret"
}

Response:
{
  "token": "jwt-token",
  "user": { ... }
}
```

## セキュリティ設計
### 認証・認可フロー
[認証プロセスの詳細]

### セキュリティ対策
- **入力検証**: [方式と実装方法]
- **XSS対策**: [エスケープ処理等]
- **CSRF対策**: [トークン方式等]
- **SQLインジェクション対策**: [パラメータ化クエリ等]

## パフォーマンス設計
### 最適化戦略
- **キャッシング**: [Redis、CDN等の利用]
- **非同期処理**: [メッセージキュー等の利用]
- **データベース最適化**: [インデックス、クエリ最適化]

### スケーラビリティ
- **水平スケール**: [ロードバランサー、レプリケーション]
- **垂直スケール**: [リソース増強の計画]

## 開発・運用
### 開発環境
[開発に必要な環境とセットアップ手順]

### CI/CDパイプライン
[ビルド、テスト、デプロイの自動化]

### モニタリング・ロギング
[監視項目とログ収集方法]

## エラー戦略
### エラー分類
- **回復可能エラー**: [リトライで解決可能なエラー]
- **回復不可能エラー**: [即座に失敗させるエラー]

### エラーハンドリング方針
- **ハンドリング方式**: [例外処理、Result型、エラーコード等]
- **リトライポリシー**: [回数、間隔、バックオフ戦略]
- **フォールバック**: [代替動作、グレースフルデグラデーション]

### エラーログ・通知
- **ログレベル**: [ERROR、WARN、INFO等の基準]
- **アラート条件**: [通知が必要なエラーの条件]

## テスト戦略
### テストピラミッド
- **単体テスト**: [対象範囲、カバレッジ目標]
- **統合テスト**: [対象範囲、実行タイミング]
- **E2Eテスト**: [対象範囲、実行環境]

### テストデータ
- **データ戦略**: [フィクスチャ、ファクトリ、シード]
- **モック/スタブ方針**: [外部依存の扱い]

### CI統合
- **実行タイミング**: [PR時、マージ時、定期実行等]
- **失敗時の動作**: [ブロック、通知等]

## 制約と前提
### 技術的制約
- [使用する技術の制約]

### ビジネス制約
- [予算、期間、リソース等の制約]

### 依存関係
- [外部サービスやライブラリへの依存]

## 参照
- タスク分解: planning-tasks スキルでTODO.mdを生成
- 関連ドキュメント: [リンク]
```
