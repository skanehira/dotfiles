# 技術検証ドキュメントテンプレート

## ドキュメント構造

```markdown
# 技術検証（Feasibility Check）

## 対象機能
[機能の概要]

## 技術的不確実性

| ID | 不確実性 | 種類 | 影響度 | 発生確率 | リスクレベル |
|----|----------|------|--------|----------|-------------|
| R1 | [不確実性の説明] | [種類] | [影響度] | [確率] | [レベル] |
| R2 | ... | ... | ... | ... | ... |

## 検証項目

### R1: [不確実性名]

**検証内容**:
- [検証すること1]
- [検証すること2]

**成功基準**:
- [定量的な基準]
- [定性的な基準]

**失敗した場合の代替案**:
- [代替案1]
- [代替案2]

## PoC計画

### PoC-1: [PoC名]

**目的**: [検証する内容]

**スコープ**:
- 含む: [含める範囲]
- 含まない: [除外する範囲]

**実装内容**:
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

**成功基準**:
- [基準1]
- [基準2]

## 技術スタック（案）

| レイヤー | 技術 | 選定理由 |
|----------|------|----------|
| [レイヤー名] | [技術名] | [理由] |

## 次のステップ

1. [ ] [ステップ1]
2. [ ] [ステップ2]
```

## 記述例

```markdown
# 技術検証（Feasibility Check）

## 対象機能
SQLクエリ最適化機能 - LLMを使用してスロークエリの改善案を自動生成する

## 技術的不確実性

| ID | 不確実性 | 種類 | 影響度 | 発生確率 | リスクレベル |
|----|----------|------|--------|----------|-------------|
| R1 | LLMでのSQL改善精度 | 技術的実現性 | 致命的 | 中 | 🔴 最優先 |
| R2 | 大量データでの性能 | パフォーマンス | 重大 | 中 | 🟡 優先 |

## 検証項目

### R1: LLMでのSQL改善精度

**検証内容**:
- 既存のスロークエリ10件でLLMに改善案を生成させる
- 生成された改善案を実際に実行し、性能を計測する

**成功基準**:
- 10件中8件以上で30%以上の性能改善
- 改善案がSQLとして正しい（構文エラーなし）

**失敗した場合の代替案**:
- プロンプトの改善
- ファインチューニングの検討
- ルールベースとのハイブリッド

### R2: 大量データでの性能

**検証内容**:
- 100万行のテストデータで実行時間を計測
- 同時10リクエストでの応答時間を計測

**成功基準**:
- 95%タイルで5秒以内のレスポンス
- エラー率1%未満

**失敗した場合の代替案**:
- 非同期処理の導入
- キャッシュ戦略の見直し

## PoC計画

### PoC-1: LLM改善精度検証

**目的**: LLMがSQL改善案を適切に生成できるか検証

**スコープ**:
- 含む: 単純なSELECTクエリの改善
- 含まない: JOIN、サブクエリ、ストアドプロシージャ

**実装内容**:
1. OpenAI API連携の基本実装
2. プロンプトテンプレート作成
3. 10件のテストケースで検証
4. 結果の評価と分析

**成功基準**:
- 8/10件以上で有効な改善案
- レスポンス5秒以内

---

## 技術スタック（案）

| レイヤー | 技術 | 選定理由 |
|----------|------|----------|
| 言語 | Rust | 性能、型安全性 |
| LLM | OpenAI API | 精度、コスト |
| DB | PostgreSQL | チームの経験 |

## 次のステップ

1. [ ] PoC-1の実施
2. [ ] 結果に基づいて判断
3. [ ] DDDモデリングへ進む or 再検討
```

## リスクマトリクス参照

| 影響度＼発生確率 | 高 | 中 | 低 |
|-----------------|-----|-----|-----|
| **致命的** | 🔴 最優先 | 🔴 最優先 | 🟡 優先 |
| **重大** | 🔴 最優先 | 🟡 優先 | 🟢 通常 |
| **中程度** | 🟡 優先 | 🟢 通常 | 🟢 通常 |
| **軽微** | 🟢 通常 | ⚪ 低 | ⚪ 低 |

## 不確実性の種類

| 種類 | 説明 | 例 |
|------|------|-----|
| **技術的実現性** | そもそもできるか | LLMでSQL改善が可能か |
| **パフォーマンス** | 速度・スケール | 1秒以内に応答できるか |
| **統合** | 外部サービス連携 | DBへの接続方法 |
| **セキュリティ** | 安全性の確保 | 認証情報の扱い |
| **コスト** | 費用対効果 | API利用料金 |
